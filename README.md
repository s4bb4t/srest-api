# sAPI

## Описание

Это RESTful API сервис для EasyDev. Он предоставляет различные функции управления пользователями, такие как регистрация, аутентификация, обновление профиля и операции администратора.

## Контакты

- **Имя**: s4bb4t
- **Email**: s4bb4t@yandex.ru

## Лицензия

- **Название**: Apache 2.0
- **Ссылка**: [Apache 2.0 License](http://www.apache.org/licenses/LICENSE-2.0.html)

## Хост

- **URL**: [http://51.250.113.72:8082](http://51.250.113.72:8082)

## Базовый путь

- **BasePath**: `/api/v1`

## Безопасность

### BearerAuth

- **Описание**: Требуется JWT Bearer токен для доступа к защищенным маршрутам. Формат: `Bearer <token>`

## Схемы

- **http**

## Конечные точки

### Swagger

- **Путь**: `/swagger/*`
- **Метод**: GET
- **Описание**: Эндпоинт для документации Swagger.

### Регистрация пользователя

- **Путь**: `/auth/signup`
- **Метод**: POST
- **Описание**: Регистрирует нового пользователя. Необходим JSON с данными пользователя.
- **Параметры**:
  - **UserData** (тело запроса): Полные данные пользователя для регистрации.
- **Ответы**:
  - **201 Created**: Успешная регистрация. Возвращает данные пользователя.
  - **400 Bad Request**: Ошибка десериализации запроса или неверный ввод.
  - **409 Conflict**: Пользователь уже существует.
  - **500 Internal Server Error**: Внутренняя ошибка сервера.

### Аутентификация пользователя

- **Путь**: `/auth/signin`
- **Метод**: POST
- **Описание**: Аутентифицирует пользователя по логину и паролю. Возвращает JWT токен.
- **Параметры**:
  - **AuthData** (тело запроса): Данные для аутентификации пользователя.
- **Ответы**:
  - **200 OK**: Успешная аутентификация. Возвращает JWT токены.
  - **400 Bad Request**: Ошибка десериализации запроса или неверный ввод.
  - **401 Unauthorized**: Неверные учетные данные.
  - **500 Internal Server Error**: Внутренняя ошибка сервера.

### Обновление токена

- **Путь**: `/auth/refresh`
- **Метод**: POST
- **Описание**: Обновляет токен доступа на основе предоставленного refresh токена.
- **Параметры**:
  - **RefreshToken** (тело запроса): Refresh токен пользователя.
- **Ответы**:
  - **200 OK**: Успешное обновление токена. Возвращает новые JWT токены.
  - **400 Bad Request**: Ошибка десериализации запроса.
  - **401 Unauthorized**: Неверные учетные данные или токен истек.
  - **500 Internal Server Error**: Внутренняя ошибка сервера.

### Получение профиля пользователя

- **Путь**: `/user/profile`
- **Метод**: GET
- **Описание**: Возвращает профиль текущего аутентифицированного пользователя.
- **Ответы**:
  - **200 OK**: Возвращает данные профиля пользователя.
  - **400 Bad Request**: Пользователь не найден.
  - **500 Internal Server Error**: Внутренняя ошибка сервера.

### Обновление профиля пользователя

- **Путь**: `/user/profile`
- **Метод**: PUT
- **Описание**: Обновляет профиль пользователя с новыми данными.
- **Параметры**:
  - **Userdata** (тело запроса): Обновленные данные пользователя.
- **Ответы**:
  - **200 OK**: Профиль успешно обновлен.
  - **400 Bad Request**: Ошибка десериализации запроса или логин/электронная почта уже используются.
  - **404 Not Found**: Пользователь не найден.
  - **500 Internal Server Error**: Внутренняя ошибка сервера.

### Изменение пароля

- **Путь**: `/user/profile/reset-password`
- **Метод**: PUT
- **Описание**: Обновляет пароль пользователя.
- **Параметры**:
  - **Password** (тело запроса): Новый пароль.
- **Ответы**:
  - **200 OK**: Пароль успешно изменен.
  - **400 Bad Request**: Ошибка десериализации запроса.
  - **404 Not Found**: Пользователь не найден.
  - **500 Internal Server Error**: Внутренняя ошибка сервера.

### Управление задачами (Todo)

- **Путь**: `/todos`
- **Методы**:
  - **POST**: Создает новую задачу.
  - **GET**: Получает все задачи.
- **Путь**: `/todos/{id}`
- **Методы**:
  - **GET**: Получает задачу по ID.
  - **PUT**: Обновляет задачу по ID.
  - **DELETE**: Удаляет задачу по ID.
- **Описание**: Управление задачами.

## Admin API

### Get All Users

**GET** `/admin/users`

Получить список пользователей с возможностью фильтрации и сортировки.

- **Query Parameters:**
  - `search` (string, optional): Поиск по имени пользователя или email.
  - `sortBy` (string, optional): Поле для сортировки (`email`, `username`, `id`). По умолчанию `id`.
  - `sortOrder` (string, optional): Порядок сортировки (`asc`, `desc`, `none`). По умолчанию `asc`.
  - `isBlocked` (bool, optional): Флаг блокировки пользователя.
  - `limit` (int, optional): Ограничение на количество пользователей в запросе. По умолчанию 20.
  - `offset` (int, optional): Смещение для пагинации.

- **Response:**
  - `200 OK`: Возвращает список пользователей с метаинформацией.
  - `401 Unauthorized`: Не найден контекст пользователя.
  - `403 Forbidden`: Недостаточно прав.
  - `500 Internal Server Error`: Внутренняя ошибка сервера.

---

### Retrieve User's Profile

**GET** `/admin/users/{id}`

Получить профиль пользователя по ID.

- **Path Parameters:**
  - `id` (integer): ID пользователя.

- **Response:**
  - `200 OK`: Возвращает информацию о пользователе.
  - `400 Bad Request`: Неверный или отсутствующий ID.
  - `401 Unauthorized`: Не найден контекст пользователя.
  - `403 Forbidden`: Недостаточно прав.
  - `404 Not Found`: Пользователь не найден.
  - `500 Internal Server Error`: Внутренняя ошибка сервера.

---

### Update User's Fields

**PUT** `/admin/users/{id}`

Обновить данные пользователя по ID.

- **Path Parameters:**
  - `id` (integer): ID пользователя.

- **Request Body:**
  - `UserData` (object): Объект с данными пользователя для обновления.

- **Response:**
  - `200 OK`: Успешное обновление данных пользователя.
  - `400 Bad Request`: Неверный JSON или отсутствующий ID.
  - `401 Unauthorized`: Не найден контекст пользователя.
  - `403 Forbidden`: Недостаточно прав.
  - `404 Not Found`: Пользователь не найден.
  - `500 Internal Server Error`: Внутренняя ошибка сервера.

---

### Remove User

**DELETE** `/admin/users/{id}`

Удалить пользователя по ID.

- **Path Parameters:**
  - `id` (integer): ID пользователя.

- **Response:**
  - `200 OK`: Успешное удаление пользователя.
  - `400 Bad Request`: Неверный или отсутствующий ID.
  - `401 Unauthorized`: Не найден контекст пользователя.
  - `403 Forbidden`: Недостаточно прав.
  - `404 Not Found`: Пользователь не найден.
  - `500 Internal Server Error`: Внутренняя ошибка сервера.

---

### Block User

**POST** `/admin/users/{id}/block`

Заблокировать пользователя по ID.

- **Path Parameters:**
  - `id` (integer): ID пользователя.

- **Response:**
  - `200 OK`: Успешная блокировка пользователя.
  - `400 Bad Request`: Неверный или отсутствующий ID.
  - `404 Not Found`: Пользователь не найден.
  - `500 Internal Server Error`: Внутренняя ошибка сервера.

---

### Unlock User

**POST** `/admin/users/{id}/unlock`

Разблокировать пользователя по ID.

- **Path Parameters:**
  - `id` (integer): ID пользователя.

- **Response:**
  - `200 OK`: Успешная разблокировка пользователя.
  - `400 Bad Request`: Неверный или отсутствующий ID.
  - `404 Not Found`: Пользователь не найден.
  - `500 Internal Server Error`: Внутренняя ошибка сервера.

---

### Update User's Rights

**POST** `/admin/users/{id}/rights`

Обновить права пользователя по ID.

- **Path Parameters:**
  - `id` (integer): ID пользователя.

- **Request Body:**
  - `UserData` (object): Объект с данными для обновления прав пользователя.

- **Response:**
  - `200 OK`: Успешное обновление прав пользователя.
  - `400 Bad Request`: Неверный JSON или отсутствующий ID.
  - `404 Not Found`: Пользователь не найден.
  - `500 Internal Server Error`: Внутренняя ошибка сервера.

## Todo API

### Create Task

**POST** `/todos`

Создает новую задачу, принимая JSON с данными задачи.

- **Request Body:**
  - `UserData` (object, required): Полные данные задачи для создания.

- **Response:**
  - `200 OK`: Успешное создание задачи, возвращает объект задачи.
  - `400 Bad Request`: Неверное поле `IsDone` или ошибка десериализации JSON.
  - `500 Internal Server Error`: Внутренняя ошибка сервера.

---

### Get All Tasks

**GET** `/todos`

Получает все задачи с возможностью фильтрации по статусу.

- **Query Parameters:**
  - `filter` (string, optional): Фильтр по статусу задачи (`all`, `completed`, `inWork`).

- **Response:**
  - `200 OK`: Успешное получение всех задач с метаинформацией.
  - `500 Internal Server Error`: Внутренняя ошибка сервера.

---

### Get Task by ID

**GET** `/todos/{id}`

Получает задачу по ID, указанному в URL.

- **Path Parameters:**
  - `id` (integer, required): ID задачи.

- **Response:**
  - `200 OK`: Успешное получение задачи.
  - `400 Bad Request`: Отсутствует или неверный ID.
  - `404 Not Found`: Задача не найдена.
  - `500 Internal Server Error`: Внутренняя ошибка сервера.

---

### Update Task

**PUT** `/todos/{id}`

Обновляет данные задачи по ID, принимая JSON с новыми данными задачи.

- **Path Parameters:**
  - `id` (integer, required): ID задачи.

- **Request Body:**
  - `UserData` (object, required): Полные данные задачи для обновления.

- **Response:**
  - `200 OK`: Успешное обновление задачи.
  - `400 Bad Request`: Ошибка десериализации JSON, отсутствует или неверный ID, либо неверное поле `IsDone`.
  - `404 Not Found`: Задача не найдена.
  - `500 Internal Server Error`: Внутренняя ошибка сервера.

---

### Delete Task

**DELETE** `/todos/{id}`

Удаляет задачу по ID, указанному в URL.

- **Path Parameters:**
  - `id` (integer, required): ID задачи.

- **Response:**
  - `200 OK`: Успешное удаление задачи.
  - `400 Bad Request`: Отсутствует или неверный ID.
  - `404 Not Found`: Задача не найдена.
  - `500 Internal Server Error`: Внутренняя ошибка сервера.
